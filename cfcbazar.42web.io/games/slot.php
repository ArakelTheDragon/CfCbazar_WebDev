<?phpsession_start();if (!isset($_SESSION['email'])) {    header('Location: /login.php');    exit();}$email = $_SESSION['email'];?><!DOCTYPE html><html><head>    <title>üé∞ Slot Machine</title>    <style>        body { font-family: Arial; text-align: center; background: #111; color: white; padding: 20px; }        h1 { margin-bottom: 20px; }        .slot-grid {            display: grid;            grid-template-columns: repeat(5, 70px);            grid-template-rows: repeat(3, 70px);            gap: 10px;            justify-content: center;            margin: 20px auto;        }        .slot-cell {            font-size: 2.5em;            background: #222;            border: 2px solid #555;            border-radius: 10px;            display: flex;            align-items: center;            justify-content: center;        }        button {            padding: 12px 24px;            font-size: 18px;            background: #28a745;            color: white;            border: none;            border-radius: 8px;            cursor: pointer;        }        button:hover {            background: #218838;        }        #result, #balance {            font-size: 20px;            margin-top: 15px;        }    </style></head><body>    <h1>üé∞ Slot Machine</h1>    <div class="slot-grid" id="slotGrid">        <?php for ($i = 0; $i < 15; $i++): ?>            <div class="slot-cell">‚ùì</div>        <?php endfor; ?>    </div>    <button onclick="spin()">Spin (0.01 WTK)</button>    <div id="result"></div>    <div id="balance">Balance: <span id="tokenBalance">Loading...</span> WTK</div>    <script>    const email = <?= json_encode($email) ?>;    const items = ['üçí', 'üçã', 'üçâ', 'üîî', 'üíé', 'üçá', '‚≠ê'];    async function updateBalance() {        const res = await fetch('/worker.php?email=' + encodeURIComponent(email));        const data = await res.json();        if (data.tokens_earned !== undefined) {            document.getElementById('tokenBalance').innerText = parseFloat(data.tokens_earned).toFixed(5);        } else {            document.getElementById('tokenBalance').innerText = 'Error';        }    }    function getSymbols() {        return Array.from({ length: 15 }, () => items[Math.floor(Math.random() * items.length)]);    }    async function spin() {        const grid = document.querySelectorAll('.slot-cell');        const resultEl = document.getElementById('result');        const balanceText = document.getElementById('tokenBalance');        const currentBalance = parseFloat(balanceText.innerText);        if (currentBalance < 0.01) {            resultEl.innerText = "‚ùå Not enough WTK to spin!";            return;        }        const symbols = getSymbols();        symbols.forEach((sym, i) => grid[i].innerText = sym);        // Count horizontal matches        let winAmount = 0;        for (let row = 0; row < 3; row++) {            let rowStart = row * 5;            for (let col = 0; col < 3; col++) {                const s1 = symbols[rowStart + col];                const s2 = symbols[rowStart + col + 1];                const s3 = symbols[rowStart + col + 2];                if (s1 === s2 && s2 === s3) {                    winAmount += 0.02; // win for 3-in-a-row                }            }        }        const net = winAmount - 0.01;        resultEl.innerText = net >= 0            ? `üéâ You won ${net.toFixed(5)} WTK!`            : `üòû Lost 0.01 WTK`;        // Update balance (add or subtract net amount)        await fetch('/worker.php', {            method: 'POST',            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },            body: new URLSearchParams({                email: email,                tokens: net.toFixed(5)            })        });        updateBalance();    }    window.onload = updateBalance;    </script></body></html>